<!DOCTYPE html>
<html>
<head>
	<title>Moby: a mobile-first charts library</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<meta name="viewport"
				content="width=device-width, maximum-scale=1.0, minimum-scale=1.0, initial-scale=1, user-scalable=no,  maximum-scale=1.0, user-scalable=no"/>
	<script type="text/javascript" src="d3.js"></script>
	<!--<script type="text/javascript" src="moby-0.1.0.js"></script>-->
	<script type="text/javascript" src="src/core.js"></script>
	<script type="text/javascript" src="src/utils.js"></script>
	<script type="text/javascript" src="src/line.js"></script>
	<script type="text/javascript" src="src/bar.js"></script>
	<script type="text/javascript" src="src/bar2D.js"></script>
	<script type="text/javascript" src="src/bubble.js"></script>
	<link href="chart-style.css" rel="stylesheet">
	<style>

	</style>
</head>
<body>

<div class="container">
	<div class="chart" id="chart1"></div>
	<div class="chart" id="chart2"></div>
	<div class="chart" id="chart3"></div>
	<div class="chart" id="chart4"></div>
</div>

<script>

/*TODO:
-sanitize css per chart type
-hover
 */

	var dataBubble = [
		{name: 'Title1', values: [20]},
		{name: 'Title2', values: [18]},
		{name: 'Title3', values: [15]},
		{name: 'Title4', values: [10]},
		{name: 'Title5', values: [8]},
		{name: 'Title6', values: [7]},
		{name: 'Title7', values: [7]},
		{name: 'Title8', values: [5]},
		{name: 'Title9', values: [3]},
		{name: 'Title10', values: [1]}
	];

	var bubbles = moby.init()
		.setConfig({
			containerSelector: '#chart1',
			height: 600,
			type: 'bubble',
//			labelFormatter: function(d) {
//				return '<span class="label-text">' + d.name + '</span><br><span class="value">(' + d.values + ')</span>';
//			}
		})
		.render(dataBubble);

	var dataBar2D = [
		{name: 'Title1', values: [525], content: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Maecenas diam'},
		{name: 'Title2', values: [213], content: 'Arcu, dictum tincidunt interdum quis'},
		{name: 'Title3', values: [110], content: 'Lobortis at lacus.'},
		{name: 'Title4', values: [74], content: 'Aliquam sit amet velit ac urna auctor'},
		{name: 'Title5', values: [53], content: 'Sagittis sit amet ut nisl.'},
		{name: 'Title6', values: [53], content: 'Nullam aliquet turpis eget arcu molestie viverra.'},
		{name: 'Title7', values: [46], content: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit.'},
		{name: 'Title8', values: [32], content: 'Maecenas diam arcu, dictum tincidunt'},
		{name: 'Title9', values: [23], content: 'Interdum quis, lobortis at lacus'},
		{name: 'Title10', values: [23], content: 'Aliquam sit amet'}
	];

	var bar = moby.init()
		.setConfig({
			containerSelector: '#chart2',
			height: 30,
			type: 'bar',
			labelFormatter: function(d) {
				return '<span class="label-title"> ' + d.name + '</span><span class="label-value">(' + d.values + ')</span><span class="label-text">' + d.content + '</span>';
			}
		})
		.render(dataBar2D);

	var data1D = [
		{name: 'Title1', values: [8, 96, 83, 1, 60, 50, 55, 61, 98, 15, 95, 38, 79, 92, 77]},
		{name: 'Title2', values: [16, 39, 95, 9, 66, 20, 89, 90, 30, 85, 41, 71, 84, 9, 67]},
		{name: 'Title3', values: [68, 41, 33, 92, 80, 68, 85, 69, 21, 83, 5, 33, 64, 12, 10]},
		{name: 'Title4', values: [17, 86, 43, 54, 34, 63, 45, 16, 21, 33, 74, 26, 24, 10, 89]}
	];

	var line = moby.init()
		.setConfig({
			containerSelector: '#chart3',
			height: 50,
			type: 'line'
		})
		.render(data1D);

	var bar2D = moby.init()
		.setConfig({
			containerSelector: '#chart4',
			height: 50,
			type: 'bar2D'
		})
		.render(data1D);

	var timer = setInterval(function() {
		line.render(moby.utils.generateData2D(4, 15));
		bar2D.render(moby.utils.generateData2D(4, 15));
	}, 1000);

</script>
</body>
</html>